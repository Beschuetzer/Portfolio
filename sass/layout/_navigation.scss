:root{
	--site-nav-linear-gradient: linear-gradient(to right, $color-primary-2 0%, $color-primary-2 0%, $color-primary-1 0%, $color-primary-1 100%);
	--site-nav-active-scale-amount: 1;
}


.navbar {
	border-radius: $navbar__item-border-radius 0 0 $navbar__item-border-radius;
	position: relative;
	font-size: $default-font-size * 1.5;
	text-align: center;
	display: flex;
	align-items: center;

	@include respond(mobile-switch) {
		align-items: flex-start;
		border-radius: 0;
		&.overflow--hidden.navbar.navbar--active {
			overflow: visible !important;
		}
	}

	&__background {
		position: fixed;
		top: 0;
		left: 0;
		width: 100vw;
		height: 100vh;
		visibility: hidden;
		z-index: -1;
	}

	&__menu {
		width: $navbar__logo-width-desktop;
		height: $navbar__logo-width-desktop;
		position: relative;

		@include respond(nav-switch) {
			width: $navbar__logo-width-mobile;
			height: $navbar__logo-width-mobile;
		}

		&-bar,
		&-bar::before,
		&-bar::after {
			background-color: $color-primary-1;
			height: 0.75vw;
    	width: 4vw;

			@include respond(nav-switch) {
				height: $default-font-size * 0.33;
				width: $default-font-size * 2;
			}
		}

		&-bar {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);

			&,
			&::before,
			&::after {
				transition: 
						transform $animation-duration * 0.5 $animation-easing-standard,
						width $animation-duration * 0.5 $animation-easing-standard;
			}

			&::before,
			&::after {
				content: "";
				position: absolute;
				transform: translate(-50%, -50%);
				left: 50%;
			}

			&::before {
				transform: translate(-50%, calc(-1vw - 50%));
				@include respond(nav-switch) {
					transform: translate(-50%, calc(-0.8rem - 50%));
				}
			}

			&::after {
				transform: translate(-50%, calc(1vw + 50%));				
				@include respond(nav-switch) {
					transform: translate(-50%, calc(+0.8rem + 50%));
				}
			}
		}

		//Spread Menu bars on hover
		&:hover &-bar::before {
			transform: translate(-50%, calc(-1.5vw - 50%));
		}
		&:hover &-bar::after {
			transform: translate(-50%, calc(+1.5vw + 50%));
		}

		//Change menu bars to 'A' on click
		.navbar.navbar--active &-bar::before {
			transform: rotate(105deg) translate(0.6vw, 2.9vw);

			@include respond(nav-switch) {
				transform: $navbar__button-bar-before-transform;
			}
		}
		.navbar.navbar--active &-bar {
			width: 1.66vw;
			transform: translate(-33%, -50%);

			@include respond(nav-switch) {
				width: $default-font-size;
				transform: translate(-50%, -50%);

			}
		}
		.navbar.navbar--active &-bar::after {
			transform: rotate(-105deg) translate(0, -1vw);
			@include respond(nav-switch) {
				transform: $navbar__button-bar-after-transform;
			}
		}
		.navbar.navbar--active &-bar::after,
		.navbar.navbar--active &-bar::before {
			// width: $default-font-size * 2.85;
		}
	}

	&__content {
		position: relative;
		z-index: 10;
		visibility: hidden;
		width: 100%;
		transform: translateX(-125%);
		transition: visibility $animation-navbar, transform $animation-navbar;

		@include respond(nav-switch) {
			transform: translateY(-$default-font-size * 1.5);
			position: absolute;
			top: $default-font-size * 6.125;
    	left: -1px;
			display: flex;
			overflow: visible !important;
			flex-direction: column;
			width: $header-mobile-width-nav-switch;
		}
		@include respond(tab-land) {
			width: $header-mobile-width-tab-land;
		}
		@include respond(phone) {
			width: $header-mobile-width-phone;
		}
		@include respond(small-font) {
			width: $header-mobile-width-small-font;
		}
	}

	&__list {
		display: flex;
		justify-content: space-between;
		align-items: center;
		list-style: none;
		backface-visibility: hidden;
		transform-origin: top left;
		transition: 
			transform $animation-duration * .5 $animation-easing-standard,
			opacity $animation-duration * .75 $animation-easing-standard,
			width $animation-duration * .5 $animation-easing-modern $animation-duration * .5,
		;
		// transition: 
		// 	transform $animation-duration * .5 $animation-easing-modern,
		// 	opacity $animation-duration * 1 $animation-easing-standard,
		// 	width $animation-duration * .25 $animation-easing-standard $animation-duration * .125,
		// ;


		@include respond(nav-switch) {
			flex-direction: column;
			opacity: 0;
			width: $default-font-size * 5;
			transform: scale(0);
		}

		& .navbar__item:first-child {
			transition: 
				border-radius $animation-duration $animation-easing-standard,
			;
			border-radius: $default-font-size * 0.5 0 0 $default-font-size * 0.5;
			@include respond(nav-switch) {
				border-radius: 0;
			}
		}

		& .navbar__item:nth-child(n + 1) {
			margin-left: $default-font-size * 0.2;
			@include respond(nav-switch) {
			}
		}

		& .navbar__dropdown .navbar__item {
			margin-left: 0;
		}
	}

	&__item {
		border: $default-font-size * 0.1 solid $color-primary-1;
		position: relative;
		background-color: $color-primary-4;
		cursor: pointer;
		height: 100%;
		width: 100%;
		transition: 
			transform $animation-duration * .25 $animation-easing-standard,
			background-color $animation-duration * 0.25 $animation-easing-standard,
		;

		@include respond(nav-switch) {
			&:nth-of-type(3) {
				order: 1;
				border-radius: 0 0 $default-font-size * 2 $default-font-size * 2;

			}
		}

		& .triangle-down {
			transition: transform $animation-duration * 0.5 $animation-easing-standard;
		}

		&:hover {
			background-color: lighten($color-primary-4, $hover-color-change-amount);
		}
		&:not(.navbar__dropdown-container):hover {
			transform: translateY(-$navbar__item-divider-width);
			box-shadow: 0 $default-font-size * 0.5 $default-font-size * 2
				$navbar-box-shadow-color;
		}
		&:hover .triangle-down {
			transform: rotate(90deg);
		}
		&:last-child, &:first-child {
			border-radius: 0 10rem 10rem 0;
			@include respond(nav-switch) {
				border-radius: 0;
			}
		}
	}

	&__link:link,
	&__link:visited {
		padding: $default-font-size * $paddingFactor 0;
		font-size: 3.2rem;
		height: 100%;
		width: 100%;
		text-decoration: none;
		color: $color-primary-1;
		display: flex;
		justify-content: center;
		align-items: center;
		font-weight: 300;

		transition: 
			padding $animation-duration * 1 $animation-easing-standard,
			opacity $animation-duration * 0.5 $animation-easing-standard $animation-duration * .5,
		;

		@include respond(nav-switch) {
			flex-direction: column;
			position: relative;
			z-index: 10000;
			opacity: 0;
		}
	}

	&__button {
		cursor: pointer;
		z-index: 100;
		background-color: $color-primary-4;
		border-radius: $navbar__item-border-radius;
		display: flex;
		align-items: center;
		transition: border-radius $animation-duration * 1 $animation-easing-standard;

		@include respond(nav-switch) {
			transition: border-radius $animation-duration * .5 $animation-easing-standard;
		}

		&:hover {
			background-color: lighten($color-primary-4, $hover-color-change-amount);
		}
	}

	&__dropdown {
		visibility: hidden;
		opacity: 0;
		transform: translateY(0%);
		position: absolute;
		top: 100%;
		left: 0%;
		width: 100%;
		height: auto;
		list-style: none;
		display: flex;
		flex-direction: column;
		transition: transform $animation-duration $animation-easing-standard;

		@include respond(nav-switch) {
			position: relative;
			height: 0;
			transform: translateY(0%) scale(0);
		}

		&-group {
			display: flex;
    	align-items: center;	
		}

		& .navbar__item {
			opacity: 0;
			height: 0;
			border: none;
			margin-top: $navbar__item-divider-width;
			transform-origin: top;
			transition: height $animation-duration $animation-easing-standard,
				padding $animation-duration $animation-easing-standard,
				opacity $animation-duration $animation-easing-standard,
				transform $animation-duration * 0.25 $animation-easing-standard,
				background-color $animation-duration * 0.25 $animation-easing-standard
			;

			@include respond(nav-switch) {
				border-top: $default-font-size * .1 solid transparent;
				border-bottom: $default-font-size * .1 solid rgba($color-primary-1, .5);
				border-left: $default-font-size * .1 solid rgba($color-primary-1, .5);
				border-right: $default-font-size * .1 solid rgba($color-primary-1, .5);
				margin-top: 0;
				width: 75%;
				align-self: center;
			}


			&:first-child {
				border-radius: 0;
				@include respond(nav-switch) {
					border-top: $default-font-size * .1 solid rgba($color-primary-1, .5);
					margin-top: $default-font-size * .75;
				}
			}
			&:last-child {
				border-radius: 0 0 $navbar__item-border-radius $navbar__item-border-radius;
				@include respond(nav-switch) {
					border-radius: 0 0 $default-font-size * .5 $default-font-size * .5;

				}
			}

			&:hover {
				transform: translateX($navbar__item-divider-width) !important;
				box-shadow: -$default-font-size * 1 0 $default-font-size * 2	$navbar-box-shadow-color;
			}

			@include respond(nav-switch) {
				&:hover, &:hover + li {
					border-top: $default-font-size * .1 solid rgba($color-primary-1, .5);
				}
			}
		}

		& .navbar__link:link,
		& .navbar__link:visited {
			padding: 0;
		}
	}

	&__dropdown-container {
		transition: height $animation-duration / 10 $animation-easing-standard;

		&:hover {
			transform: translate(0);
		}
	}

	//Showing dropdown when dropdown-container or any dropdown item is hovered
	&__dropdown-container:hover &__dropdown,
	&__dropdown &__item:hover &__dropdown {
		visibility: visible;
		opacity: 1;
		height:auto;
		transform: translateY(0%) scale(1);
	}

	//Styling dropdown items on dropdown-container hover
	&__dropdown-container:hover &__dropdown &__item {
		height: 100%;
		opacity: 1;
	}

	&__dropdown-container:hover &__dropdown &__link {
		padding: $default-font-size * $paddingFactor $default-font-size * 2;
	}

	//when navbar is open
	&.navbar--active {
		& .navbar__link, & .navbar__link:link, & .navbar__link:visited {
			opacity: 1;
		}
		& .navbar__list {
			opacity: 1;
			width: 100%;
   		transform: scale(1);
		
		}
		& .navbar__content {
			visibility: visible;
			opacity: 1;
			transform: translateX(0%);

			@include respond(nav-switch) {
				width: $header-mobile-width-nav-switch;
				position: absolute;
				z-index: 100;
			}
	
			@include respond(tab-land) {
				width: $header-mobile-width-tab-land;
			}

			@include respond(phone) {
				width: $header-mobile-width-phone;
			}

			@include respond(small-font) {
				width: $header-mobile-width-small-font;
			}
		}

		& .navbar__button {
			border-radius: $default-font-size * 10 $default-font-size * 1
				$default-font-size * 1 $default-font-size * 10;
			@include respond(nav-switch) {
				border-radius: $default-font-size * 10 $default-font-size * 10
					$default-font-size * 1 $default-font-size * 1;
			}
			//A hover styling
			&:hover .navbar__menu-bar::before {
				transform: rotate(135deg) translate(1.1vw, 1.1vw);
				@include respond(nav-switch) {
					transform: rotate(135deg) translate(1.1rem, 1.1rem);
				}
			}
			&:hover .navbar__menu-bar::after {
				transform: rotate(-135deg) translate(1.1vw, -1.1vw);
				@include respond(nav-switch) {
					transform: rotate(-135deg) translate(1.1rem, -1.1rem);
				}
			}
			&:hover .navbar__menu-bar {
				width: 0;
			}
			
		}

		& .navbar__link:not(&__dropdown &__link) {
			padding: $default-font-size * $paddingFactor $default-font-size * 1.5;

			@include respond(nav-switch) {
				padding: $default-font-size 0;
			}
		}

		& .navbar__background {
			visibility: visible;
		}
	}

	//Handling Bug where leaving button after clicking causes overflow hidden to change
	&.navbar--isAnimating * {
		pointer-events: none;
	}

	& * {
		-webkit-user-drag: none;
		-khtml-user-drag: none;
		-moz-user-drag: none;
		-o-user-drag: none;
		-webkit-touch-callout: none; /* iOS Safari */
		-webkit-user-select: text; /* Safari 'none' or 'text' here 'all' has issues*/
		-khtml-user-select: none; /* Konqueror HTML */
		-moz-user-select: none; /* Old versions of Firefox */
		-ms-user-select: none; /* Internet Explorer/Edge */
		user-select: none; /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */
	}
}

#root {
	transition: filter $animation-duration $animation-easing-standard;
}
#root.navbar--active {
	filter: blur($default-font-size * 0.5) brightness(0.75)
		drop-shadow(
			0px $default-font-size * 1 $default-font-size * 2
				rgba($color-grey-light-4, 0.2)
		);
}

.header {
	top: calc(((100vw - (85rem + ((100vw - 85rem) / 2) + 8rem)) / 2) - 1rem);
	width: 100%;
	position: fixed;
	z-index: 1;
	transition: 
		opacity $animation-duration $animation-easing-standard,
		transform $animation-duration $animation-easing-standard,
	;

	@include respond(nav-switch) {
		top: 0;
		z-index: 10;
		background-color: $color-primary-1;
		border-bottom: $default-font-size * .1 solid $color-primary-4;
	}

	&__inner {
		display: flex;
		// flex-direction: row-reverse;
		justify-content: space-between;
		align-items: center;
		width: calc(85rem + ((100vw - 85rem) / 2) + 8.5vw);
		// width: calc(85rem + ((100vw - 85rem) / 2) + 8rem);
		margin: 0 auto;

		@include respond(nav-switch) {
			width: 95%;
		}
	}

	&-toggler {
		display:flex;
		justify-content: center;
		align-items: flex-end;
		height: $header-height + $header-toggler-width;
		border-left: $default-font-size * .15 solid $color-primary-4;
		border-bottom: $default-font-size * .15 solid $color-primary-4;
		border-right: $default-font-size * .15 solid $color-primary-4;
		border-radius: 0 0 1000px 1000px;
		position: fixed;
		right: 0;
		top: 0;
		z-index: 5;
		background-color: $color-primary-1;
		opacity: 0;
		transition: 
			top $animation-duration * 1 $animation-easing-standard-easeInOutBack-smaller,
		;

		@include respond(nav-switch) {
			opacity: 1;
		}

		&__svg {
			cursor: pointer;
			transform: rotate(180deg);
			fill: $color-primary-4;
			width: $header-toggler-width;
			height: $header-toggler-width;
			transition: 
				transform $animation-duration $animation-easing-modern $animation-duration * .5
			;
		}

		&--active {
			top: -($header-height);

			& svg {
				transform: rotate(0deg);
			}

			& + .header {
				transform: translateY(-$header-height);
			}
		}
	}
}

.page-nav {
	z-index: 1;
	position: absolute;
	top: calc(((100vw - (85rem + ((100vw - 85rem) / 2) + 8rem)) / 2) + 7rem);
	left: 0;
	width: calc((100% - 85rem) / 2);

	// top: calc(((100vw - (85rem + ((100vw - 85rem) / 2) + 8rem)) / 2) + 7rem);
	// left: calc(((100% - 85rem) / 4) - 2rem);
	// width: calc(((100% - 85rem) / 4) + 2rem);

	font-size: 1vw;	
	display: grid;
	justify-items: center;
	grid-auto-rows: minmax(min-content, 1fr);

	@include respond(nav-switch) {
		// display: grid;
		font-size: $default-font-size * .75;	

		position: static;
		width: calc(95% - 16rem);
		grid-template-rows: auto;
		grid-template-columns: repeat(auto-fill, minmax($default-font-size * 8.96875, 1fr));
		justify-items: center;
	}

	&__section {
		list-style: decimal;
		color: transparent;
		background-image: var(--site-nav-linear-gradient);
		-webkit-background-clip: text;
		background-clip: text;
		
		&-group {
			backface-visibility: hidden;
			list-style: none;
			padding: $default-font-size 0;
			transition: 
				transform $animation-duration $animation-easing-standard,
			;
		
			&:nth-of-type(1){
				@include respond(nav-switch) {
					margin-left: 0;
				}
			}

			@include respond(nav-switch) {
				padding: $default-font-size * .25 0;
			}

			@include respond(small-font) {
				padding: 0;
			}
		}

	}
	
	&__inner {
		
	}
	
	&--active {
		transform: scale(var(--site-nav-active-scale-amount));
		// animation: selected-section infinite 5s forwards;
	}
	
}
