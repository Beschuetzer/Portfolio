$carousel-width: 50vw;
$carousel-svg-width: $default-font-size * 6;
$carousel-svg-parent-width: $carousel-progress-bar-height * 4;
$carousel-grid-column-gap: $default-font-size;
$carousel-grid-width: calc(
	(#{$resume-card-width-full} - 2 * #{$carousel-grid-column-gap * 3}) / 3
);

.carousel {
	grid-column: 2 / span 3;
	display: grid;
	grid-column-gap: $carousel-grid-column-gap;
	grid-template-columns: repeat(
		auto-fit,
		minmax($carousel-grid-width, $default-font-size)
	);
	padding: 0 0 0 0.2rem;
	justify-items: flex-start;
	align-items: flex-start;
	overflow: hidden;
	margin-left: $default-font-size * 2;
	width: calc(100% - #{$default-font-size} * 3.75);

	@include respond(nav-switch) {
	}

	// grid-template-columns: repeat(auto-fit, minmax(calc( (85rem - 2 * 4.8rem) / 3 ), 1.6rem));

	@include respond(nav-switch) {
		// width: 100%;
		margin-left: 0;
		justify-content: center;
		grid-column-gap: $default-font-size / 2;
		grid-template-columns: repeat(
			auto-fit,
			minmax($default-font-size * 5, $default-font-size * 21)
		);
		grid-row-gap: $default-font-size * 0.5;
	}

	&__dots {
		grid-column: 3 / span 1;
		grid-row: 2 / span 1;
		display: flex;
		justify-content: center;
		align-items: center;

		@include respond(nav-switch) {
			display: none;
		}
	}

	&__dot {
		--opacity: 0.33;
		position: relative;
		z-index: 6;
		cursor: pointer;
		width: $navbar__logo-width / 2;
		height: $navbar__logo-width / 2;
		fill: rgba(
			#{var(--color-primary-1-rgb)},
			var(--carousel-dot-alpha, var(--opacity))
		);

		&:hover {
			--carousel-dot-alpha: 0.75;
		}

		&--active {
			--opacity: 1;
		}
	}

	&__arrow-button {
		--fullscreen-top: calc(
			(#{$carousel-full-screen-image-height} - #{$navbar__logo-width}) / 2
		);

		position: relative;
		z-index: 100;
		// transform: none;
		justify-self: center;
		align-self: center;
		cursor: pointer;

		@include respond(nav-switch) {
			display: none;
		}

		&--full-screen {
			position: fixed;
			z-index: 1000000;
			top: var(--fullscreen-top);
		}

		&--full-screen#{&}--left {
			left: 0;
		}

		&--full-screen#{&}--right {
			right: 0;
		}

		&--left {
			grid-column: 2 / span 1;
			grid-row: 2 / span 1;
			transform: rotate(90deg);
		}

		&--right {
			grid-column: 4 / span 1;
			grid-row: 2 / span 1;
			transform: rotate(-90deg);
		}

		& svg {
			width: $navbar__logo-width;
			height: $navbar__logo-width;
			fill: rgba(var(--color-primary-1-rgb), 0.75);

			@include respond(nav-switch) {
				width: $default-font-size * 5;
				height: $default-font-size * 5;
			}

			&:hover,
			&:active,
			&:focus {
				fill: var(--color-primary-1);
			}
		}
	}

	&__item {
		pointer-events: none;
		position: relative;
		z-index: 1;
		font-size: $default-font-size;
		width: 100%;
		height: $default-font-size * 20;

		border: $default-font-size * 0.1 solid var(--color-primary-1);
		border-radius: $default-font-size * 0.5;
		overflow: hidden;

		transform: translateX(var(--carousel-item-translation-x));

		& * {
			pointer-events: all;
		}

		& .card__progress {
			z-index: 100000;
			bottom: calc(100vh - #{$carousel-full-screen-image-height});
			opacity: 0;
			visibility: hidden;
			height: $carousel-progress-bar-height;
			position: fixed;
			// cursor: pointer;
			// width: 100%;
			// left: 0;
			// -webkit-appearance: none;
			// appearance: none;
			// border: none;
		}

		&--full-screen {
			width: 100vw;
			height: 100vh;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 100000;
			transform: translate(0, 0);
			transition: none;
			border: none;
			border-radius: 0;

			& .card__progress {
				opacity: 1;
				visibility: visible;

				&::-webkit-progress-bar {
					background-color: var(--color-primary-1);
					box-shadow: 0 3px 16px rgba(0, 0, 0, 0.25);
					border: 1px solid var(--color-primary-4);
				}
			}

			& .carousel__video {
				cursor: auto;
			}

			& .carousel__video ~ .carousel__image-description {
				padding: $default-font-size * 1
					calc(#{$carousel-svg-parent-width} * 1 + #{$default-font-size})
					$default-font-size * 1 $carousel-svg-parent-width * 2;
			}

			& .carousel__image-description {
				display: flex;
				font-size: $default-font-size * 2;
				justify-content: center;
				align-items: center;
				position: fixed;
				min-height: calc(100vh - #{$carousel-full-screen-image-height});
				background: var(--color-primary-4);
				color: var(--color-primary-1);

				@include respond(nav-switch) {
					font-size: $default-font-size * 1.5;
				}
			}
		}

	
	}

	&__video {
		cursor: pointer;
		&.fg-video {
			opacity: 1;
			video {
				top: 0;
				left: 50%;
				position: fixed;
				height: 100%;
				object-position: top left;
				object-fit: cover;
				transform: translateX(-50%);
				width: auto;

				.carousel__item--full-screen & {
						width: 100vw;
						backdrop-filter: blur(10px);
						height: calc(#{$carousel-full-screen-image-height} - #{$carousel-progress-bar-height});
				}
			}

			&.full-screen {
				cursor: auto;
				video {
					height: calc(
						#{$carousel-full-screen-image-height} - #{$carousel-progress-bar-height}
					);
				}
			}
		}

		&-svg {
			pointer-events: none;
			width: $carousel-svg-width;
			height: $carousel-svg-width;
			fill: var(--color-primary-4);
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			transition: fill $animation-duration / 4 $animation-easing-standard;

			& use {
				pointer-events: none;
			}

			.carousel__item--full-screen & {
				opacity: 0;
			}
		}

		&:hover ~ &-svg {
			fill: var(--color-primary-3);
		}
	}

	&__image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		object-position: top;
		cursor: pointer;

		-webkit-user-drag: none;
		-khtml-user-drag: none;
		-moz-user-drag: none;
		-o-user-drag: none;

		-webkit-touch-callout: none; /* iOS Safari */
		-webkit-user-select: text; /* Safari 'none' or 'text' here 'all' has issues*/
		-khtml-user-select: none; /* Konqueror HTML */
		-moz-user-select: none; /* Old versions of Firefox */
		-ms-user-select: none; /* Internet Explorer/Edge */
		user-select: none; /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */

		@include respond(nav-switch) {
			width: 100%;
		}

		&:not(.full-screen):hover,
		&:not(.full-screen)focus,
		&:not(.full-screen)active {
			filter: sepia(0.15);
		}

		&.full-screen {
			cursor: auto;
		}

		&-description {
			display: flex;
			visibility: hidden;
			opacity: 0;
			justify-content: center;
			align-items: center;
			font-size: $default-font-size * 1;
			text-align: center;
			left: 0;
			bottom: 0;
			width: 100%;
			position: absolute;
			color: var(--color-primary-4);
			z-index: 10000;
			background: rgba(var(--color-primary-1-rgb), $resume-color-opacity);
			padding: $default-font-size;
			transition: opacity $animation-duration $animation-easing-standard;
			// display: none;
			// height: 100vh;
			// border: none;
			// border-radius: 0;
			// object-fit: contain;
			// backdrop-filter: blur($default-font-size) sepia(0) brightness(0.25);
			// transform: translate(0,0);
			// transition: none;
		}
	}

	&__item:hover &__image-description,
	&__item:active &__image-description,
	&__item:focus &__image-description,
	&__item--full-screen &__image-description {
		visibility: visible;
		opacity: 1;
	}

	//overlay-text styling
	& .overlay-text {
		opacity: 0;
		visibility: hidden;
		transition: opacity $animation-duration $animation-easing-standard;
		padding: $default-font-size $default-font-size * 2;
		background-color: rgba(var(--color-primary-4-rgb), 0.9);
		border-radius: $default-font-size / 2;
	}
	// &__item--stopped .overlay-text,
	// &__item--done .overlay-text {
	// 	opacity: 1;
	// 	visibility: visible;
	// }

	//control styling below here
	& :is(.card__play, .card__pause, .card__restart, .card__stop, .card__close) {
		opacity: 1;
		visibility: visible;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		width: 100%;
		height: 100%;
	}

	&
		:is(.card__play-parent, .card__pause-parent, .card__restart-parent, .card__stop-parent, .card__close-parent) {
		cursor: pointer;
		z-index: -1;
		width: $carousel-svg-parent-width;
		height: $carousel-svg-parent-width;
		top: auto;
		bottom: 0;
		transform: translateY(0);

		& svg {
			fill: rgba(var(--color-primary-red-rgb), 1);
			&:hover {
				fill: rgba(
					var(--color-primary-red-rgb),
					$carousel-fullscreen-button-hover-opacity
				);
			}
		}
	}

	& .card__play-parent {
		left: 0;
		visibility: visible;
		opacity: 1;
	}

	& .card__pause-parent {
		left: 0;
		opacity: 0;
		visibility: hidden;
	}

	& .card__restart-parent {
		right: $default-font-size;
		left: auto;
	}

	& .card__stop-parent {
		left: $carousel-svg-parent-width;
	}

	& .card__close-parent {
		right: $default-font-size;
		left: auto;
		top: 0;
		transform: none;
	}

	& .card__play {
	}

	& .card__pause {
	}

	& .card__restart {
		width: 75%;
		height: 75%;
	}

	& .card__stop {
	}

	& .card__close {
		// transform: translate(5%, 80%);
		// left: auto;
		// right: $default-font-size * 1.375;
		// right: 2.2rem;
		// top: 1.6rem;
		// top: $default-font-size;
		// bottom: 10vh;
		height: $carousel-svg-parent-width;
		width: $carousel-svg-parent-width;
		opacity: 0;
	}

	//showing close x when hovering
	& .card__close-parent:hover .card__close {
		opacity: 1;
	}

	//making close button more noticable
	&__item--stopped ~ .card__close-parent .card__close,
	&__item--done ~ .card__close-parent .card__close {
		animation: 5s infinite color-change;
	}

	//hiding pause when video is stopped
	:is(.carousel__item--stopped, .carousel__item--done) ~ .card__pause-parent {
		display: none;
	}

	&__item--playing {
		& ~ .card__play-parent {
			opacity: 0;
			visibility: hidden;
		}
		& ~ .card__pause-parent {
			opacity: 1;
			visibility: visible;
		}
	}
	// :is(&__item--stopped, &__item--done) ~ .card__pause-parent {
	// 	visibility: visible;
	// 	opacity: 1;
	// }

	//showing controls when is open
	&
		&__item--full-screen
		:is(.card__play-parent, .card__pause-parent, .card__restart-parent, .card__stop-parent, .card__close-parent) {
		z-index: 10000;
	}

	&__item--full-screen .card__close-parent .card__close {
		opacity: 1;
	}
}
