$carousel-width: 50vw;
$carousel-svg-width: $default-font-size * 6;
$carousel-svg-parent-width: $carousel-progress-bar-height * 4;
$carousel-grid-column-gap: $default-font-size;
$carousel-grid-width: calc(
	(#{$resume-card-width-full} - 2 * #{$carousel-grid-column-gap} - 0.3rem) / 3
);

.carousel {
	grid-column: 2 / span 3;
	display: grid;
	grid-column-gap: $carousel-grid-column-gap;
	grid-template-columns: repeat(
		auto-fit,
		minmax($carousel-grid-width, $default-font-size)
	);
	padding: 0 0 0 0.2rem;
	justify-items: flex-start;
	align-items: flex-start;
	overflow: hidden;

	@include respond(nav-switch) {
		width: 100%;
		justify-content: center;
		grid-column-gap: $default-font-size / 2;
		grid-template-columns: repeat(
			auto-fit,
			minmax($default-font-size * 5, $default-font-size * 21)
		);
		grid-row-gap: $default-font-size * 0.5;
	}

	&__dots {
		grid-column: 3 / span 1;
		grid-row: 2 / span 1;
		display: flex;
		justify-content: center;
		align-items: center;

		@include respond(nav-switch) {
			display: none;
		}
	}

	&__dot {
		position: relative;
		z-index: 6;
		cursor: pointer;
		width: $navbar__logo-width / 2;
		height: $navbar__logo-width / 2;
		fill: rgba(#{var(--color-primary-3-rgb)}, .5);

		&--active {
			fill: var(--color-primary-2) !important;
		}
	}

	&__arrow-button {
		position: relative;
		z-index: 100;
		// transform: none;
		justify-self: center;
		align-self: center;
		cursor: pointer;

		@include respond(nav-switch) {
			display: none;
		}

		&--left {
			grid-column: 2 / span 1;
			grid-row: 2 / span 1;
			transform: rotate(90deg);
		}

		&--right {
			grid-column: 4 / span 1;
			grid-row: 2 / span 1;
			transform: rotate(-90deg);
		}

		& svg {
			width: $navbar__logo-width;
			height: $navbar__logo-width;
			fill: var(--color-primary-4);

			@include respond(nav-switch) {
				width: $default-font-size * 5;
				height: $default-font-size * 5;
			}

			&:hover,
			&:active,
			&:focus {
				fill: var(--color-primary-3);
			}
		}
	}

	&__item {
		pointer-events: none;
		position: relative;
		z-index: 1;
		font-size: $default-font-size;
		width: 100%;
		height: $default-font-size * 20;

		border: $default-font-size * 0.1 solid var(--color-primary-4);
		border-radius: $default-font-size * 0.5;
		overflow: hidden;

		transform: translateX(var(--carousel-item-translation-x));

		& * {
			pointer-events: all;
		}

		& .card__progress {
			z-index: 100000;
			bottom: calc(100vh - #{$carousel-full-screen-image-height});
			opacity: 0;
			visibility: hidden;
			height: $carousel-progress-bar-height;
			position: fixed;
			// cursor: pointer;
			// width: 100%;
			// left: 0;
			// -webkit-appearance: none;
			// appearance: none;
			// border: none;
		}

		&--full-screen {
			width: 100vw;
			height: 100vh;
			position: fixed;
			top: 0;
			left: 0;
			z-index: 100000;
			transform: translate(0, 0);
			transition: none;
			border: none;
			border-radius: 0;

			& .card__progress {
				opacity: 1;
				visibility: visible;

				&::-webkit-progress-bar {
					background-color: var(--color-primary-1);
					box-shadow: 0 3px 16px rgba(0,0,0,.25);
					border: 1px solid var(--color-primary-4);
				}
			}

			& .carousel__video ~ .carousel__image-description {
				padding:
					$default-font-size * 1
					$carousel-svg-parent-width * 1
					$default-font-size * 1
					$carousel-svg-parent-width * 2
				;
			}

			& .carousel__image-description {
				display: flex;
				font-size: $default-font-size * 2;
				justify-content: center;
				align-items: center;
				position: fixed;
				min-height: calc(100vh - #{$carousel-full-screen-image-height});
				background: var(--color-primary-4);

				@include respond(nav-switch) {
					font-size: $default-font-size * 1.5;
				}
			}
		}
		
		&--is-playing{
			
		}
	}

	&__video {
		cursor: pointer;
		&.fg-video {
			opacity: 1;
			video {
				object-position: top left;
				top: 0;
				position: fixed;
				height: 100%;
			}

			&.full-screen {
				video {
					height: calc(
						#{$carousel-full-screen-image-height} - #{$carousel-progress-bar-height}
					);
				}
			}
		}

		&-svg {
			pointer-events: none;
			width: $carousel-svg-width;
			height: $carousel-svg-width;
			fill: var(--color-primary-4);
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			transition: fill $animation-duration / 4 $animation-easing-standard;

			& use {
				pointer-events: none;
			}
		}

		&:hover ~ &-svg {
			fill: var(--color-primary-3);
		}
	}

	&__image {
		width: 100%;
		height: 100%;
		object-fit: cover;
		object-position: top;
		cursor: pointer;

		// transition:
		// 	filter $animation-duration / 2 $animation-easing-standard
		// ;

		-webkit-user-drag: none;
		-khtml-user-drag: none;
		-moz-user-drag: none;
		-o-user-drag: none;

		-webkit-touch-callout: none; /* iOS Safari */
		-webkit-user-select: text; /* Safari 'none' or 'text' here 'all' has issues*/
		-khtml-user-select: none; /* Konqueror HTML */
		-moz-user-select: none; /* Old versions of Firefox */
		-ms-user-select: none; /* Internet Explorer/Edge */
		user-select: none; /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */

		@include respond(nav-switch) {
			width: 100%;
		}

		&:not(.full-screen):hover,
		&:not(.full-screen)focus,
		&:not(.full-screen)active {
			filter: sepia(0.15);
		}

		&-description {
			display: flex;
			visibility: hidden;
			opacity: 0;
			justify-content: center;
			align-items: center;
			font-size: $default-font-size * 1;
			text-align: center;
			left: 0;
			bottom: 0;
			width: 100%;
			position: absolute;
			color: var(--color-primary-1);
			z-index: 10000;
			background: rgba($color-primary-downloader-4, 0.5);
			padding: $default-font-size;
			transition:     
				opacity $animation-duration $animation-easing-standard,
			;
			// display: none;
			// height: 100vh;
			// border: none;
			// border-radius: 0;
			// object-fit: contain;
			// backdrop-filter: blur($default-font-size) sepia(0) brightness(0.25);
			// transform: translate(0,0);
			// transition: none;
		}
	}

	&__item:hover &__image-description,
	&__item:active &__image-description,
	&__item:focus &__image-description,
	&__item--full-screen &__image-description
	{
		visibility: visible;
		opacity: 1;
	}

	//control styling below here
	& :is(.card__play, .card__pause, .card__restart, .card__stop, .card__close) {
		opacity: 1;
		visibility: visible;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		width: 100%;
		height: 100%;
	}

	& :is(.card__play-parent, .card__pause-parent, .card__restart-parent, .card__stop-parent, .card__close-parent) {
		
		cursor: pointer;
		z-index: -1;
		width: $carousel-svg-parent-width;
		height: $carousel-svg-parent-width;
		top: auto;
		bottom: 0;
		transform: translateY(0);
		
		& svg{
			fill: var(--color-primary-1);
			&:hover {
				fill: var(--color-primary-2);
			}
		}
	}

	& .card__play-parent {
		left:0;
	}

	& .card__pause-parent {
		left: 0;
	}

	& .card__restart-parent {
		right: 0;
		left: auto;
	}

	& .card__stop-parent {
		left: $carousel-svg-parent-width;
	}

	& .card__close-parent {
		left: 0;
		bottom: 100vh - $carousel-full-screen-image-height;
		width: 100%;
		height: 100%;
	}

	& .card__play {
	}

	& .card__pause {
	}

	& .card__restart {
		width: 75%;
		height: 75%;
	}

	& .card__stop {
	
	}

	& .card__close {
    transform: translate(5%,80%);
		top: 0;
    left: auto;
    right: 0;
    bottom: auto;
    height: $carousel-svg-parent-width;
    width: $carousel-svg-parent-width;
    opacity: 0;
	}

	//showing close x when hovering
	& .card__close-parent:hover .card__close{
		opacity: 1;
	}

	//hiding pause when video is stopped
	:is(.carousel__item--stopped, .carousel__item--done) ~ .card__pause-parent {
		display: none;
	}

	&__item--playing ~ .card__play-parent {
		display: none;
	}

	//showing controls when is open
	& &__item--full-screen :is(.card__play-parent, .card__pause-parent, .card__restart-parent, .card__stop-parent, .card__close-parent)  {
		z-index: 10000;
	}
}
